# Build 3
---
name: blinken
adopt-info: blinken
confinement: strict
grade: stable
base: core22
build-base: core22
version: 22.12.3
apps:
    blinken:
        common-id: org.kde.blinken.org
        command: blinken
        # extensions:
        #     - kde-neon
        plugs:
            - audio-playback
            - unity7
package-repositories:
    -   type: apt
        components:
            - main
        suites:
            - jammy
        key-id: 444DABCF3667D0283F894EDDE6D4736255751E5D
        url: http://origin.archive.neon.kde.org/user
        key-server: keyserver.ubuntu.com
parts:
    blinken:
        plugin: cmake
        build-packages:
            - cmake
        build-snaps:
            - kf5-5-104-qt-5-15-8-core22-sdk
        source: http://download.kde.org/stable/release-service/22.12.3/src/blinken-22.12.3.tar.xz
        build-environment:
            - PATH: /snap/kf5-5-104-qt-5-15-8-core22-sdk/current/usr/bin{$PATH}:+:{$PATH}
            - XDG_DATA_DIRS: $CRAFT_STAGE/usr/share:/snap/kf5-5-104-qt-5-15-8-core22-sdk/current/usr/share:/usr/share
            - LD_LIBRARY_PATH: /snap/kf5-5-104-qt-5-15-8-core22-sdk/current/lib/$CRAFT_ARCH_TRIPLET:/snap/kf5-5-104-qt-5-15-8-core22-sdk/current/usr/lib/$CRAFT_ARCH_TRIPLET:/snap/kf5-5-104-qt-5-15-8-core22-sdk/current/usr/lib:/snap/kf5-5-104-qt-5-15-8-core22-sdk/current/usr/lib/vala-current:/snap/kf5-5-104-qt-5-15-8-core22-sdk/current/usr/lib/$CRAFT_ARCH_TRIPLET/pulseaudio
            - PKG_CONFIG_PATH: /snap/kf5-5-104-qt-5-15-8-core22-sdk/current/usr/lib/$CRAFT_ARCH_TRIPLET/pkgconfig:/snap/kf5-5-104-qt-5-15-8-core22-sdk/current/usr/lib/pkgconfig:/snap/kf5-5-104-qt-5-15-8-core22-sdk/current/usr/share/pkgconfig
            - ACLOCAL_PATH: /snap/kf5-5-104-qt-5-15-8-core22-sdk/current/usr/share/aclocal
            - SNAPCRAFT_CMAKE_ARGS: '-DCMAKE_FIND_ROOT_PATH=/snap/kf5-5-104-qt-5-15-8-core22-sdk/current -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release -DENABLE_TESTING=OFF -DBUILD_TESTING=OFF -DKDE_SKIP_TEST_SETTINGS=ON'
# ---
# name: blinken
# confinement: strict
# grade: stable
# base: core22
# adopt-info: blinken
# version: 22.12.3
# apps:
#     blinken:
#         extensions:
#         - kde-neon
#         common-id: org.kde.blinken.desktop
#         desktop: usr/share/applications/org.kde.blinken.desktop
#         command: usr/bin/blinken
#         plugs:
#         - audio-playback
# slots:
#     session-dbus-interface:
#         interface: dbus
#         name: org.kde.blinken
#         bus: session
# package-repositories:
# -   type: apt
#     components:
#     - main
#     suites:
#     - focal
#     key-id: 444DABCF3667D0283F894EDDE6D4736255751E5D
#     url: http://origin.archive.neon.kde.org/user
#     key-server: keyserver.ubuntu.com
# parts:
#     blinken:
#         plugin: cmake
#         build-packages:
#         - libkf5doctools-dev
#         - libphonon4qt5-dev
#         - libphonon4qt5experimental-dev
#         source: http://download.kde.org/stable/release-service/22.12.3/src/blinken-22.12.3.tar.xz
#         cmake-parameters:
#         - "-DCMAKE_INSTALL_PREFIX=/usr"
#         - "-DCMAKE_BUILD_TYPE=Release"
#         - "-DENABLE_TESTING=OFF"
#         - "-DBUILD_TESTING=OFF"
#         - "-DKDE_SKIP_TEST_SETTINGS=ON"
#         - "-DCMAKE_FIND_ROOT_PATH=/usr\\;$CRAFT_STAGE\\;/snap/kf5-5-104-qt-5-15-8-core22-sdk/current"
#         parse-info:
#         - usr/share/metainfo/org.kde.blinken.appdata.xml
#         prime:
#         - "-usr/lib/*/cmake/*"
#         - "-usr/include/*"
#         - "-usr/share/ECM/*"
#         - "-usr/share/doc/*"
#         - "-usr/share/man/*"
#         - "-usr/share/icons/breeze-dark*"
#         - "-usr/bin/X11"
#         - "-usr/lib/gcc/$SNAPCRAFT_ARCH_TRIPLET/6.0.0"
#         - "-usr/lib/aspell/*"
#     cleanup:
#         after:
#         - blinken
#         plugin: nil
#         build-snaps:
#         - kf5-5-104-qt-5-15-8-core22-sdk
#         override-prime: |
#             set -eux
#             find $SNAPCRAFT_PRIME/usr/share/doc/ -type f -not -name 'copyright' -delete
#             find $SNAPCRAFT_PRIME/usr/share -type d -empty -delete
